
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation">
      
      
        <meta name="author" content="Amine Djeghri">
      
      
      
        <link rel="prev" href="../../apps/awesome_websites_browser_extensions/">
      
      
        <link rel="next" href="../../linux/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Laptop as a server - Stremio Addon Python Template</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#laptop-as-a-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Stremio Addon Python Template" class="md-header__button md-logo" aria-label="Stremio Addon Python Template" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Stremio Addon Python Template
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Laptop as a server
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Awesome OS Setup

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../CONTRIBUTING/" class="md-tabs__link">
        
  
  
    
  
  Contributing to this project

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../apps_configuration_and_shorcuts/" class="md-tabs__link">
          
  
  
    
  
  Docs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../package/awesome_os/detect_os/" class="md-tabs__link">
          
  
  
    
  
  Package

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tests/archlinux/" class="md-tabs__link">
          
  
  
    
  
  Tests

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Stremio Addon Python Template" class="md-nav__button md-logo" aria-label="Stremio Addon Python Template" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Stremio Addon Python Template
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Awesome OS Setup
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to this project
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apps_configuration_and_shorcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apps configuration and shortcuts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../awesome_websites_browser_extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Awesome websites &amp; browser extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Android tv
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Android tv
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../android-tv/readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TV Setup (googletv / android tv)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Apps
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Apps
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apps/apps_configuration_and_shorcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apps configuration and shortcuts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apps/awesome_websites_browser_extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Awesome websites &amp; browser extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Laptop as a server
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Laptop as a server
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubuntu-server-2404" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ubuntu Server 24.04
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ubuntu Server 24.04">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#first-checks-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        First checks / updates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lid-closed-laptop" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lid closed (Laptop)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      
        Home Assistant
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Assistant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtualization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Virtualization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-kvm-kernel-based-virtual-machine-and-libvirt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install KVM (Kernel-based Virtual Machine) and libvirt
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install KVM (Kernel-based Virtual Machine) and libvirt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-bridge-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a bridge configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-assistant-os-in-a-vm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Home Assistant OS in a VM
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#haos-runs-under-system-libvirt-and-needs-to-be-managed-by-root-and-uses-varliblibvirt" class="md-nav__link">
    <span class="md-ellipsis">
      
        HAOS runs under system libvirt and needs to be managed by root and uses /var/lib/libvirt
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HAOS runs under system libvirt and needs to be managed by root and uses /var/lib/libvirt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inside-ha-in-your-browser-or-mobile-app" class="md-nav__link">
    <span class="md-ellipsis">
      
        inside HA in your browser or mobile app:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-accessing-haos-from-outside-your-local-network-cloudflare-tunnel-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Accessing HAOS from outside your local network — Cloudflare Tunnel Setup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Accessing HAOS from outside your local network — Cloudflare Tunnel Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-basic-information-top-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        1️⃣ Basic Information (Top Section)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-add-public-hostname-important" class="md-nav__link">
    <span class="md-ellipsis">
      
        2️⃣ Add Public Hostname (IMPORTANT)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-browser-rendering-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        3️⃣ Browser Rendering Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-policies-most-important-part" class="md-nav__link">
    <span class="md-ellipsis">
      
        4️⃣ Policies (MOST IMPORTANT PART)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-optional-add-a-second-policy-emergency-lockdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        5️⃣ (Optional) Add a Second Policy – Emergency Lockdown
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-login-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        6️⃣ Login Methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-back-to-the-previous-page-to-see-the-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Go back to the previous page to see the policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-save-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        7️⃣ Save the Application ✅
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate-mfa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Activate MFA
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-assistant-devices-add-ons-and-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Home Assistant devices, add-ons, and integrations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Assistant devices, add-ons, and integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matter-over-wi-fi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matter over Wi-Fi
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matter-over-thread-and-zigbee-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matter over Thread and Zigbee devices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automation-scenes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automation &amp; scenes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adguard-home-address-naming-resolution-using-the-router-freebox" class="md-nav__link">
    <span class="md-ellipsis">
      
        AdGuard Home address naming resolution using the router (Freebox)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../linux/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Linux
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../macos_darwin/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Macos darwin
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Macos darwin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../windows_workflow/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Windows workflow
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Windows workflow
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Package
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Package
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Awesome os
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Awesome os
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/detect_os/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Detect os
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/env_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Env settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_3" id="__nav_4_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Frontend
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Frontend
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/frontend/controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/frontend/dialogs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dialogs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/frontend/main/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Main
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/frontend/runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4" id="__nav_4_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Factory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/sudo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sudo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/task/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4_5" id="__nav_4_1_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Managers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Managers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/managers/arch_yay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arch yay
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/managers/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/managers/darwin_brew/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Darwin brew
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/managers/ubuntu_apt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubuntu apt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/managers/ubuntu_snap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubuntu snap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/managers/windows_winget/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows winget
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4_6" id="__nav_4_1_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    System
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    System
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/font/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Font
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Git
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Help
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/nvidia_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nvidia tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/windows_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/windows_wsl_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows wsl tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/awesome_os/tasks/system/zsh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zsh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tests
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tests
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../tests/archlinux/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Archlinux
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archlinux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubuntu-server-2404" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ubuntu Server 24.04
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ubuntu Server 24.04">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#first-checks-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        First checks / updates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lid-closed-laptop" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lid closed (Laptop)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      
        Home Assistant
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Assistant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtualization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Virtualization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-kvm-kernel-based-virtual-machine-and-libvirt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install KVM (Kernel-based Virtual Machine) and libvirt
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install KVM (Kernel-based Virtual Machine) and libvirt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-bridge-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a bridge configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-assistant-os-in-a-vm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Home Assistant OS in a VM
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#haos-runs-under-system-libvirt-and-needs-to-be-managed-by-root-and-uses-varliblibvirt" class="md-nav__link">
    <span class="md-ellipsis">
      
        HAOS runs under system libvirt and needs to be managed by root and uses /var/lib/libvirt
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HAOS runs under system libvirt and needs to be managed by root and uses /var/lib/libvirt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inside-ha-in-your-browser-or-mobile-app" class="md-nav__link">
    <span class="md-ellipsis">
      
        inside HA in your browser or mobile app:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-accessing-haos-from-outside-your-local-network-cloudflare-tunnel-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Accessing HAOS from outside your local network — Cloudflare Tunnel Setup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Accessing HAOS from outside your local network — Cloudflare Tunnel Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-basic-information-top-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        1️⃣ Basic Information (Top Section)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-add-public-hostname-important" class="md-nav__link">
    <span class="md-ellipsis">
      
        2️⃣ Add Public Hostname (IMPORTANT)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-browser-rendering-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        3️⃣ Browser Rendering Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-policies-most-important-part" class="md-nav__link">
    <span class="md-ellipsis">
      
        4️⃣ Policies (MOST IMPORTANT PART)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-optional-add-a-second-policy-emergency-lockdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        5️⃣ (Optional) Add a Second Policy – Emergency Lockdown
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-login-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        6️⃣ Login Methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-back-to-the-previous-page-to-see-the-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Go back to the previous page to see the policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-save-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        7️⃣ Save the Application ✅
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate-mfa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Activate MFA
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-assistant-devices-add-ons-and-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Home Assistant devices, add-ons, and integrations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Assistant devices, add-ons, and integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matter-over-wi-fi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matter over Wi-Fi
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matter-over-thread-and-zigbee-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matter over Thread and Zigbee devices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automation-scenes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automation &amp; scenes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adguard-home-address-naming-resolution-using-the-router-freebox" class="md-nav__link">
    <span class="md-ellipsis">
      
        AdGuard Home address naming resolution using the router (Freebox)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Awesome OS Setup
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../apps_configuration_and_shorcuts/" class="md-path__link">
          
  <span class="md-ellipsis">
    Docs
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="./" class="md-path__link">
          
  <span class="md-ellipsis">
    Home server
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="laptop-as-a-server">Laptop as a server</h1>
<h2 id="ubuntu-server-2404">Ubuntu Server 24.04</h2>
<h3 id="setup">Setup</h3>
<ul>
<li>Set up an Ubuntu Server on a laptop.</li>
<li>You  better have Ethernet connection. If you only have wifi, buy a usb  ethernet adapter. It's worth it and you will be able to use the bridge mode which is not available with wifi.</li>
<li>boot up ubuntu from an usb drive, select the language, keyboard layout, and timezone. In the network section, select the Ethernet connection, an IP 192.168.x.x will be assigned.</li>
<li>Wait for mirror to be configured.</li>
<li>Assign some partitions : <code>ext4</code> 100GB for <code>/</code> and some space for var/lib. <code>/var/lib</code> is where most application data lives. KVM/Libvirt stores virtual machine disks in /var/lib/libvirt/images. Docker (if you use it for AdGuard) stores everything in /var/lib/docker.</li>
<li>Install <code>openssh-server</code> and manage it remotely using SSH from another machine so you can copy-paste commands from the documentation.</li>
</ul>
<h3 id="first-checks-updates">First checks / updates</h3>
<ul>
<li>Run updates:</li>
</ul>
<pre><code class="language-bash">sudo apt update &amp;&amp; sudo apt upgrade
</code></pre>
<ul>
<li>Run <code>ip addr</code> to check the IP address. This is your HOST-IP. It looks like <code>192.168.x.x</code></li>
<li>
<p>Run <code>ping google.com</code> to check the connection.</p>
</li>
<li>
<p>Connect remotely in the same network using SSH and the HOST-IP from another machine that has a GUI and a browser so you can copy-paste commands from the documentation.</p>
</li>
</ul>
<pre><code class="language-bash">ssh username@192.168.x.x
</code></pre>
<ul>
<li>I customized the shell environment by installing Zsh and tools from the <a href="https://github.com/AmineDjeghri/awesome-os-setup">Awesome OS</a> to improve usability and productivity.</li>
</ul>
<h3 id="lid-closed-laptop">Lid closed (Laptop)</h3>
<ul>
<li>File: <code>/etc/systemd/logind.conf</code></li>
<li>Change this line: <code>HandleLidSwitch=ignore</code></li>
<li>Restart with <code>sudo systemctl restart systemd-logind</code></li>
</ul>
<h2 id="home-assistant">Home Assistant</h2>
<h3 id="virtualization">Virtualization</h3>
<ul>
<li>I verified that virtualization was supported on the system, checked Secure Boot status:</li>
<li>Run:</li>
</ul>
<pre><code class="language-bash">egrep -c '(vmx|svm)' /proc/cpuinfo
</code></pre>
<p>Should return a number <code>&gt; 0</code>.
- Sometimes it returns <code>0</code>. In that case you need to check if Virtualization is enabled in your BIOS to ensure compatibility.
- If you still have <code>0</code>, and you are sure that Virtualization is enabled in your BIOS, ignore the <code>0</code>.</p>
<h3 id="install-kvm-kernel-based-virtual-machine-and-libvirt">Install KVM (Kernel-based Virtual Machine) and libvirt</h3>
<ul>
<li>Install:</li>
</ul>
<pre><code class="language-bash">sudo apt-get install qemu-system-x86 libvirt-daemon-system virtinst \
ovmf swtpm qemu-utils guestfs-tools libosinfo-bin -y
</code></pre>
<ul>
<li>Verify:</li>
</ul>
<pre><code class="language-bash">lsmod | grep kvm
sudo kvm-ok
lscpu | grep Virtualization
</code></pre>
<ul>
<li>Check libvirt:</li>
</ul>
<pre><code class="language-bash">sudo systemctl status libvirtd
sudo usermod -aG libvirt $USER
sudo usermod -aG kvm $USER
</code></pre>
<h4 id="create-a-bridge-configuration">Create a bridge configuration</h4>
<p>A network bridge in KVM allows your virtual machines to appear directly on the same network as your host.</p>
<ul>
<li>
<p>Without a bridge: VMs often use NAT (Network Address Translation). They can access the internet, but other devices on your LAN cannot access the VMs directly.</p>
</li>
<li>
<p>With a bridge: VMs act like physical machines on your network. They get an IP from your router (or DHCP server) just like your host, and other devices can communicate with them directly.</p>
</li>
<li>
<p>This works only with Ethernet, not with wifi.</p>
</li>
</ul>
<p>How to:
- Identify your network interface with <code>ip addr</code>, it should look like <code>enp0s31f6</code> or <code>enx001</code>  It is where you can see eth0.
- Create a bridge configuration file in <code>/etc/netplan/</code> with the following content:</p>
<ul>
<li>Create a bridge configuration file in  <code>/etc/netplan/01-bridge.yaml</code>, replace <code>enx001cc253c478</code> with your interface name:</li>
</ul>
<pre><code class="language-yaml">network:
  version: 2
  renderer: networkd
  ethernets:
    enx001cc253c478:
      dhcp4: no
  bridges:
    br0:
      interfaces: [enx001cc253c478]
      dhcp4: yes
      parameters:
        stp: false
        forward-delay: 0
</code></pre>
<ul>
<li>Before applying the configuration, connect physically to the server because the next command will change the ip address of the SSH and your SSH connection will be lost.</li>
<li>Your host’s IP will move from enx001cc253c478 to br0</li>
<li>Apply the configuration:</li>
</ul>
<pre><code class="language-bash">sudo netplan apply
</code></pre>
<p>If you are connected via SSH, you will be disconnected.
Go physically to the server and get the new IP address:</p>
<pre><code class="language-bash">ip addr
</code></pre>
<p>Your <code>interface name</code> will no longer have a direct IP. All traffic goes through <code>br0</code>.
To connect to the server via SSH, you will need to use the <code>br0</code> address.</p>
<h3 id="home-assistant-os-in-a-vm">Home Assistant OS in a VM</h3>
<ul>
<li>
<p>Doc: https://www.home-assistant.io/installation/alternative#virtual-machines</p>
</li>
<li>
<p>Download the Home Assistant OS image:</p>
</li>
</ul>
<pre><code class="language-bash">wget https://github.com/home-assistant/operating-system/releases/download/16.3/haos_ova-16.3.qcow2.xz
</code></pre>
<ul>
<li>Move the image to the libvirt directory:</li>
</ul>
<pre><code class="language-bash">sudo mv haos_ova-16.3.qcow2.xz /var/lib/libvirt/images/
</code></pre>
<ul>
<li>Uncompress the image:</li>
</ul>
<pre><code class="language-bash">sudo xz -d /var/lib/libvirt/images/haos_ova-16.3.qcow2.xz
</code></pre>
<ul>
<li>important: we will use sudo so with all the commands later like <code>virsh list --all</code> should use sudo <code>sudo virsh list --all</code> otherwise it will show nothing.</li>
<li>
<h2 id="haos-runs-under-system-libvirt-and-needs-to-be-managed-by-root-and-uses-varliblibvirt">HAOS runs under system libvirt  and needs to be managed by root and uses /var/lib/libvirt</h2>
</li>
</ul>
<table>
<thead>
<tr>
<th>Feature</th>
<th>system (<code>root</code>)</th>
<th>user</th>
<th>Notes / Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Autostart on boot</td>
<td>✅</td>
<td>⚠️ Possible</td>
<td>Root/systemd can autostart VMs easily. Users can use <code>systemd --user</code> or autostart scripts, but extra setup required.</td>
</tr>
<tr>
<td>USB passthrough</td>
<td>✅</td>
<td>⚠️ Possible</td>
<td>Root can attach any USB device. Users can do it if they’re in <code>libvirt</code>/<code>kvm</code> groups and udev rules allow access.</td>
</tr>
<tr>
<td>Bluetooth / Zigbee</td>
<td>✅</td>
<td>⚠️ Possible</td>
<td>Needs hardware access; root can do it directly. Users need correct groups and permissions.</td>
</tr>
<tr>
<td>Headless server use</td>
<td>✅</td>
<td>✅</td>
<td>Works for both. Headless VM does not require GUI.</td>
</tr>
<tr>
<td>Network bridges</td>
<td>✅</td>
<td>⚠️ Possible</td>
<td>Root can create bridges freely. Users need pre-made bridges or <code>sudo</code> for creation.</td>
</tr>
<tr>
<td>IP forwarding / port mapping</td>
<td>✅</td>
<td>❌</td>
<td>Modifying <code>sysctl</code> and <code>iptables</code> requires root. Users cannot forward ports without <code>sudo</code>.</td>
</tr>
<tr>
<td>Cloudflare tunnel stability</td>
<td>✅</td>
<td>✅</td>
<td>Independent of root vs user. Tunnels are stable as long as service runs correctly.</td>
</tr>
</tbody>
</table>
<ul>
<li>Create the VM: ( we are adding --network bridge=br0) to use the bridge.</li>
</ul>
<pre><code class="language-bash">sudo virt-install --name haos --description &quot;Home Assistant OS&quot; --os-variant=generic --ram=4096 --vcpus=2 --disk /var/lib/libvirt/images/haos_ova-16.3.qcow2,bus=scsi --controller type=scsi,model=virtio-scsi --import --graphics none --boot uefi --network bridge=br0,model=virtio --console pty,target_type=serial
</code></pre>
<ul>
<li>
<p>Once you see <code>Welcome to Home Assistant homeassistant login:</code>, you can quit leave the console using <code>Ctrl + Alt Gr +]</code> or Open a new terminal.</p>
</li>
<li>
<p>Now we need to check if HAOS is running:</p>
</li>
<li><code>sudo virsh list --all</code>, you should see the VM running named <code>haos</code></li>
<li>Find the IP address of the HAOS VM: From your router’s DHCP table (recommended) on your router app/website. As you can understand, the VM is like a device that is connected to the router, that is why the router assigned it an IP address.</li>
<li>The default port is <code>8123</code></li>
<li>Check if HAOS is running : open a browser and go to <code>http://&lt;HAOS-IP&gt;:8123</code> or use curl: <code>curl -v http://&lt;HAOS-IP&gt;:8123</code></li>
<li>You should see the Home Assistant login page.</li>
<li>Back on your terminal, activate the autostart: <code>sudo virsh autostart haos</code></li>
<li>Check autostart in: <code>sudo virsh dominfo haos</code></li>
</ul>
<p>You need to differentiate between:</p>
<ul>
<li>HOST IP (the IP of the laptop): <code>ip addr</code> example: <code>192.168.1.86</code></li>
<li>VM-IP or HAOS-IP (the IP of the HAOS VM) example: <code>192.168.1.20</code></li>
<li>Both have IPs assigned from the router. The HAOS VM uses a bridge, so it gets an IP from the router just like a regular device.</li>
<li>These IPs can change if we restart the router, we will assign static ip to the VM.</li>
</ul>
<h4 id="inside-ha-in-your-browser-or-mobile-app">inside HA in your browser or mobile app:</h4>
<ul>
<li>In your browser, go to <code>http://&lt;HOST-IP&gt;:8123</code>, for example <code>http://192.168.1.86:8123</code>.</li>
<li>Create an account.</li>
<li>User settings: Profile -&gt; General-&gt; language, date format, number format, etc.</li>
<li>Check Advanced mode in General settings.</li>
<li>in User settings, go to Security -&gt; Enable MFA</li>
<li>In Settings, check for an update for HAOS. After the update it will restart the server.</li>
<li>In the addon store, click on the three dots on the top right and add this repository: https://github.com/homeassistant-apps/repository</li>
<li>Set up a static IP for the VM: in HAOS website go to Settings -&gt; System -&gt; Network -&gt; and change IPv4 from auto to static and IPv6 too. You can keep the default ip that is assigned to the VM.</li>
</ul>
<h3 id="2-accessing-haos-from-outside-your-local-network-cloudflare-tunnel-setup">2. Accessing HAOS from outside your local network  — Cloudflare Tunnel Setup</h3>
<ul>
<li>Create a Domain or your domain is already managed by <strong>Cloudflare</strong></li>
<li>In HAOS, add the addon <code>file editor</code>.</li>
<li>Follow this video: https://youtu.be/JGAKzzOmvxg</li>
<li>Don't forget to update and save configuration.yaml</li>
<li>Restart HAOS</li>
<li>On you phone, when you add home assistant, add both local and external URL, so you can connect when you are outside</li>
<li>Adding both local and external URL is important because the external URL is the one that will be used when you are outside your local network.</li>
</ul>
<p><strong>Add Cloudflare Access (Zero Trust) ⭐⭐⭐</strong></p>
<p>This is the single biggest security upgrade. Before showing your Home Assistant app in your browser or mobile, it will force the user to first login via an email or something.
If the User can't log in, he won't be able to see the app.</p>
<ul>
<li>You are protecting for example <code>ha.yourdomain.com</code>
Go to  Cloudflare Zero Trust -&gt; Access Controls -&gt; Applications -&gt; Self-hosted:</li>
</ul>
<h5 id="1-basic-information-top-section">1️⃣ Basic Information (Top Section)</h5>
<p>Application name</p>
<p>Use something clear:</p>
<ul>
<li>Home Assistant</li>
<li>(or Home Assistant – Production if you like)</li>
</ul>
<p>Session Duration</p>
<p>Recommended:</p>
<ul>
<li>24 hours or You can put more</li>
</ul>
<h5 id="2-add-public-hostname-important">2️⃣ Add Public Hostname (IMPORTANT)</h5>
<p>Click Add public hostname.</p>
<p>Fill in:</p>
<ul>
<li>Hostname: <code>ha.yourdomain.com</code></li>
<li>Path: <code>/*</code></li>
<li>Type: HTTP</li>
</ul>
<p>👉 This is what actually puts the Access login page in front of Home Assistant.</p>
<p>Do NOT add private IP unless you know you need it.</p>
<h5 id="3-browser-rendering-settings">3️⃣ Browser Rendering Settings</h5>
<p>Leave this OFF / untouched.</p>
<p>(Home Assistant does NOT need SSH/RDP/VNC rendering)</p>
<h5 id="4-policies-most-important-part">4️⃣ Policies (MOST IMPORTANT PART)</h5>
<p>Click Add a policy. It will open a new page, and need to go back to this page and refresh it to show the policies.</p>
<p>Policy 1 — Allow yourself (and family)</p>
<ul>
<li>Policy name: Allow Home Assistant Users</li>
<li>Action: Allow</li>
</ul>
<p>Rules (choose ONE of these methods):</p>
<p>✅ Best option: Email-based</p>
<ul>
<li>Include -&gt; Emails -&gt; <code>your@email.com</code></li>
<li>You can add multiple emails (family members).</li>
</ul>
<p>✅ Alternative: Identity provider</p>
<p>If using Google / Microsoft / GitHub:</p>
<ul>
<li>Include -&gt; Identity Provider -&gt; Google</li>
<li>Include -&gt; Emails ending in -&gt; <code>@gmail.com</code></li>
</ul>
<p>❌ Do NOT use:</p>
<ul>
<li>“Allow everyone”</li>
<li>IP-only rules (unless combined with email)</li>
<li>Country-only rules alone</li>
</ul>
<p>(Optional but recommended)</p>
<ul>
<li>Add Require MFA if available in your plan.</li>
</ul>
<h5 id="5-optional-add-a-second-policy-emergency-lockdown">5️⃣ (Optional) Add a Second Policy – Emergency Lockdown</h5>
<p>Advanced but useful:</p>
<ul>
<li>Policy name: Block High Risk Countries</li>
<li>Action: Block</li>
<li>Rule:</li>
<li>Include -&gt; Countries -&gt; (countries you NEVER travel to)</li>
</ul>
<p>Cloudflare evaluates Block after Allow, so this is safe.</p>
<h5 id="6-login-methods">6️⃣ Login Methods</h5>
<p>You’ll see:</p>
<ul>
<li>Accept all available identity providers -&gt; ON</li>
</ul>
<p>Recommended setting:</p>
<p>✅ Leave this ON if:</p>
<ul>
<li>You trust future IdPs</li>
<li>You are the only admin</li>
</ul>
<p>OR</p>
<p>🔒 Turn OFF and explicitly select:</p>
<ul>
<li>Google</li>
<li>Email OTP</li>
</ul>
<p>This is slightly more secure, less future surprise.</p>
<h5 id="go-back-to-the-previous-page-to-see-the-policies">Go back to the previous page to see the policies</h5>
<p>Where you put your domain, choose the policies you added.</p>
<h5 id="7-save-the-application">7️⃣ Save the Application ✅</h5>
<p>Once saved:</p>
<ul>
<li>Visiting <code>ha.yourdomain.com</code> should show Cloudflare Access login. If it doesn't force refresh the page or clear cookies.</li>
<li>Only after login -&gt; Home Assistant loads</li>
</ul>
<p>If you do a restoration, or change something in cloudflare, and you see that you can't view home assistant, delete the cookies and try again.</p>
<h4 id="activate-mfa">Activate MFA</h4>
<ul>
<li>In profile -&gt; security, activate MFA</li>
</ul>
<p>You should now have:</p>
<ul>
<li>✅ Cloudflare Tunnel (no ports open)</li>
<li>✅ Cloudflare Access login in front of HA</li>
<li>✅ Email or Google login</li>
<li>✅ MFA</li>
<li>✅ 1 month session</li>
</ul>
<hr />
<h3 id="home-assistant-devices-add-ons-and-integrations">Home Assistant devices, add-ons, and integrations</h3>
<ul>
<li><strong>Integrations</strong>: built into Home Assistant (Settings -&gt; Devices &amp; services).</li>
<li><strong>Add-ons (Apps)</strong>: services that run alongside Home Assistant OS (AdguardHome,Cloudflared...etc).</li>
<li><strong>Repositories</strong>: additional catalogs for community add-ons and integrations (example: HACS).</li>
</ul>
<p>Notes:</p>
<ul>
<li>Always search for an open-source integration before using a proprietary app. For example: TP-link, Dreame, LG ThinQ, Bosch Home Connect have open-source integrations and are far better than the proprietary apps.</li>
<li>Some devices still need their vendor app for initial setup or extra features (example: LG, Bosch). It’s fine to keep the app installed even if you control the device later in Home Assistant.</li>
</ul>
<h4 id="matter-over-wi-fi">Matter over Wi-Fi</h4>
<ul>
<li>TBD</li>
</ul>
<h4 id="matter-over-thread-and-zigbee-devices">Matter over Thread and Zigbee devices</h4>
<ul>
<li>If the device does Matter over Thread, you will need a Thread Border Router (TBR) on your network. Personally, I recommend <a href="https://www.amazon.fr/SONOFF-Dongle-PMG24-Dongle-Plus-MG24/dp/B0FMJD288B">Sonoff MG24</a> . It even supports both Thread and Zigbee and the same time.</li>
<li>Do not use Aqara M100 because it is proprietary and not well-supported in Home Assistant.</li>
</ul>
<p>How to setup Sonoff MG24:</p>
<ul>
<li>Attach to usb port, run <code>usb-devices</code> on ubuntu and get Vendor and ProdID.</li>
<li>Run:</li>
</ul>
<p><code>sh
 sudo virsh attach-device haos /dev/stdin --persistent &lt;&lt;EOF
 &lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;
   &lt;source&gt;
     &lt;vendor id='0x10c4'/&gt;
     &lt;product id='0xea60'/&gt;
   &lt;/source&gt;
 &lt;/hostdev&gt;
 EOF</code></p>
<p>Or using the bus and device:</p>
<p><code>sh
 sudo virsh attach-device haos /dev/stdin --persistent &lt;&lt;EOF
 &lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;
   &lt;source&gt;
     &lt;address bus='1' device='12'/&gt;
   &lt;/source&gt;
 &lt;/hostdev&gt;
 EOF</code></p>
<ul>
<li>Run <code>sudo virsh reboot haos</code>.</li>
<li>Go to Home Assistant -&gt; Settings -&gt; System -&gt; Hardware -&gt; All Hardware -&gt; search for <code>Sonoff</code>.</li>
<li>Flash it using this <a href="https://blog.dautek.fr/comment-installer-le-dongle-zigbee-et-thread-sonoff-mg24-sur-home-assistant">tutorial</a>.</li>
</ul>
<p>If you want only thread: flash Sonoff for thread only.</p>
<p>If you want both Thread controller and Zigbee, use Multipan with the MG24. Tutorials:</p>
<ul>
<li>French: https://sonoff.tech/fr-fr/blogs/news/how-to-use-multipan-in-home-assistant-with-sonoff-dongle</li>
<li>English: https://www.sonoff.in/blog/product-guides-3/how-to-use-multipan-in-home-assistant-with-sonoff-zbdongle-e-36</li>
<li>Deactivate ZHA, and add devices: https://youtu.be/KA4XvVhyCtE?t=112</li>
<li>If you are facing an issue with onboarding not loading after submitting, check: https://community.home-assistant.io/t/smlight-slzb-06-new-installation-can-not-pass-the-zigbee2mqtt-onboarding-page/908462/2</li>
</ul>
<p>### Apps / Add-ons</p>
<ul>
<li><strong>AdGuard Home</strong></li>
<li>DNS and DHCP (do not forget to add IPv4 and IPv6 DNS servers to your router). Disable safe search.</li>
<li>For IP address name resolving, check <a href="#adguard-home-address-naming-resolution-using-the-router-freebox">this section</a>.</li>
<li>
<p>Docs/repo: https://github.com/hassio-addons/addon-adguard-home</p>
</li>
<li>
<p><strong>Cloudflared</strong> (Cloudflare Tunnel)</p>
</li>
<li>
<p>Repo: https://github.com/homeassistant-apps/app-cloudflared</p>
</li>
<li>
<p><strong>Donetick</strong> add-on</p>
</li>
<li>
<p>Repo: https://github.com/donetick/hassio-addons</p>
</li>
<li>
<p><strong>File editor</strong> :</p>
</li>
<li>Docs: https://github.com/home-assistant/addons/tree/master/configurator</li>
<li>
<p>How to install: https://github.com/home-assistant/addons/blob/master/configurator/DOCS.md</p>
</li>
<li>
<p><strong>HACS</strong> ("Get HACS") : https://www.hacs.xyz/</p>
</li>
<li>
<p><strong>Home Assistant Google Drive Backup</strong></p>
</li>
<li>Repo: https://github.com/sabeechen/hassio-google-drive-backup</li>
<li>Backup everything except media.</li>
<li>Test the backup at least once: https://youtu.be/xXXW7sQ9rqs?t=274</li>
<li>Backup keeps everything, even addons configuration (delete cookies if the login page is not showing on your domain name).</li>
<li>Samba backup add-on: https://github.com/thomasmauerer/hassio-addons/tree/master/samba-backup</li>
<li>
<p>After a restoration, everything should work as expected:</p>
<ul>
<li>Clean cookies in your browser because of Cloudflare.</li>
<li>The Sonoff MG24 can be unrecognized: wait a bit; if still not recognized, detach it and attach it again.</li>
</ul>
</li>
<li>
<p><strong>Samba Share</strong></p>
</li>
<li>Docs: https://github.com/home-assistant/addons/tree/master/samba</li>
<li>How to install: https://github.com/home-assistant/addons/blob/master/samba/DOCS.md</li>
<li>Useful video example: https://www.youtube.com/watch?v=Vu_oxefjd0I</li>
<li>
<p>Common tasks: https://www.home-assistant.io/common-tasks/os/#installing-and-using-the-samba-add-on</p>
</li>
<li>
<p><strong>Terminal &amp; SSH</strong></p>
</li>
<li>
<p>Guide: https://lazyadmin.nl/smart-home/enable-ssh-home-assistant/</p>
</li>
<li>
<p><strong>motionEye</strong></p>
</li>
<li>Integration docs: https://www.home-assistant.io/integrations/motioneye/</li>
</ul>
<p>#### Controllers / routers add-ons</p>
<ul>
<li><strong>Home Assistant Matter Hub</strong></li>
<li>Repo: https://github.com/t0bst4r/home-assistant-matter-hub</li>
<li>Tutorial: https://www.youtube.com/watch?v=-TMzuHFo_-g</li>
<li>
<p>Notes:</p>
<ul>
<li>Transform any device into a Matter device.</li>
<li>Use it with Alexa and Google Home. If Alexa doesn't discover the hub, use Google Home app, then add it to Alexa from Google Home.</li>
<li>You need to add labels to entities (not devices).</li>
</ul>
</li>
<li>
<p><strong>Matter Server</strong></p>
</li>
<li>
<p><strong>Mosquitto broker</strong></p>
</li>
<li>
<p><strong>Silicon Labs Multiprotocol</strong></p>
</li>
<li>
<p><strong>Silicon Labs Flasher</strong> (useful for multiprotocol / firmware)</p>
</li>
<li>
<p>Official add-on docs: https://github.com/home-assistant/addons/tree/master/silabs_flasher</p>
</li>
<li>
<p><strong>SONOFF Dongle Flasher</strong></p>
</li>
<li>
<p><strong>Zigbee2MQTT</strong></p>
</li>
</ul>
<p>### Integrations</p>
<ul>
<li><strong>HACS</strong></li>
<li>The best is to use community integrations when available; they often have more features.</li>
<li><strong>AdGuard Home</strong></li>
<li>
<p>Add-on repo (service): https://github.com/hassio-addons/addon-adguard-home</p>
</li>
<li>
<p><strong>Alexa Media Player</strong></p>
</li>
<li>Repo: https://github.com/alandtse/alexa_media_player</li>
<li>Video guide you referenced: https://www.youtube.com/watch?v=TDdREzkigIE&amp;t</li>
<li>
<p>Docs: https://www.home-assistant.io/integrations/alexa_media_player/</p>
</li>
<li>
<p><strong>Android TV Remote</strong></p>
</li>
<li>
<p><strong>Matter</strong></p>
</li>
<li>
<p><strong>Thread</strong></p>
</li>
<li>
<p><strong>motionEye</strong></p>
</li>
<li>
<p>https://www.home-assistant.io/integrations/motioneye/</p>
</li>
<li>
<p><strong>Dreame vacuum</strong></p>
</li>
<li>Community integration repo: https://github.com/Tasshack/dreame-vacuum</li>
<li>
<p>Do not use the version 1. Use version &gt; 2 (supports multiple accounts: dreamehome, xiaomi, etc.).</p>
</li>
<li>
<p><strong>LG</strong></p>
</li>
<li>Better use the integration from HACS.</li>
<li>Common community integration: https://github.com/ollo69/ha-smartthinq-sensors</li>
<li>Docs: https://www.home-assistant.io/integrations/lg/</li>
<li>** Home Connect Alt**</li>
<li>
<p>https://github.com/ekutner/home-connect-hass</p>
</li>
<li>
<p>Other integrations: Freebox, Freemobile</p>
</li>
<li>
<p>Freebox: https://www.home-assistant.io/integrations/freebox/</p>
</li>
<li>
<p>Freemobile: https://www.home-assistant.io/integrations/freemobile/</p>
</li>
<li>
<p>Volets Profalux Zigbee:</p>
</li>
<li>https://perso.aquilenet.fr/~sven337/francais/2023/06/02/Appairage-de-volets-Profalux-Zigbee.html</li>
</ul>
<h3 id="automation-scenes">Automation &amp; scenes</h3>
<ul>
<li>🤖 Automation = When something happens → do something<ul>
<li>Always use entities instead of devices. Entities have unique names.</li>
</ul>
</li>
<li>🎬 Scene = Set things to a predefined state. A scene is just a snapshot of states.</li>
<li>👉 Automations trigger scenes</li>
<li>When you add an entity, you can select a default behavior (toggle , show info, etc..) . For example a camera move down button, the default behavior is to <code>show more info</code>, but you can change it to <code>toggle</code> so when you press that button, it will move the camera.</li>
</ul>
<h2 id="adguard-home-address-naming-resolution-using-the-router-freebox">AdGuard Home address naming resolution using the router (Freebox)</h2>
<ul>
<li>The following will show you how to get the names of the devices in AdGuard home using your router (this example is for Freebox API).</li>
<li>You will notice that your AdGuard Home (AGH) logs contains anonymous entries like "FREE SAS" or raw IPv6 addresses (e.g., fe80::...).</li>
<li>We create a Python script on Ubuntu that will get all the information from the Freebox API and send it to the AdGuard Home API.</li>
<li>Steps:</li>
<li>In the addon configuration in HA: open the port 8082, you should access the dashboard without authentication on <code>HA-IP:8082</code>. the username and password are your Home assistant username and password (you can create a user named 'adguard' for it).</li>
<li>Put the following scripts in the server:<ul>
<li><a href="../freebox_auth.py">freebox_auth.py</a></li>
<li><a href="../sync_adguard_home_ip_mac.py">sync_adguard_home_ip_mac.py</a></li>
</ul>
</li>
<li>I am using Freebox pop as a router, so I use the script <a href="../freebox_auth.py">freebox_auth.py</a> to get the token <code>uv run freebox_auth.py</code></li>
<li>then I use this script in the server to automatically update Adguard home: <a href="../sync_adguard_home_ip_mac.py">sync_adguard_home_ip_mac.py</a> to automatically resolve IPV6 addresses and clients names. <code>uv run sync_adguard_home_ip_mac.py</code></li>
<li>Make a cronjob for it by adding this line at the end of <code>crontab -e</code> (change the path of uv and the script)</li>
</ul>
<pre><code class="language-sh"># For example
* * * * * /home/amine/.local/bin/uv run sync_adguard_home_ip_mac.py
</code></pre>
<ul>
<li>Check Settings -&gt; Client settings -&gt; <strong>Persistent clients settings</strong> .</li>
<li>This script will run every minute. If it discovers a new device, it will update the log file <code>sync_agh.log</code> with the latest sync information.</li>
</ul>
<h1 id="todo">todo:</h1>
<ul>
<li>backup vm</li>
<li>Lan architecture : Router Freebox = Honor Router 3  (bridge) - Ubuntu server (HAOS ( Adguard DNS + DHCP + Script for IPV6 update &amp; naming resolution))</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.indexes", "navigation.top", "toc.follow", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>